{"ast":null,"code":"var _jsxFileName = \"/Users/nghiatq/web-btcn-1612422/src/containers/game.js\";\nimport React, { Component } from 'react';\nimport '../css/Game.css';\nimport logo from \"../logo.svg\";\nimport Board from '../components/board';\nimport Config from '../constants/configs';\nimport Status from '../components/status';\n\nclass Game extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: [{\n        x: null,\n        y: null,\n        squares: Array(Config.brdSize).fill(null).map(() => {\n          return Array(Config.brdSize).fill(null);\n        })\n      }],\n      nextMove: Config.xPlayer,\n      stepNumber: 0,\n      winCells: null,\n      accendingMode: true\n    };\n  }\n\n  checkWin(row, col, user, step) {\n    if (step === 0) {\n      return null;\n    }\n\n    const history = this.state.history;\n    const current = history[step];\n    const squares = current.squares.slice(); // Get coordinates\n\n    let coorX = row;\n    let coorY = col;\n    let countCol = 1;\n    let countRow = 1;\n    let countMainDiagonal = 1;\n    let countSkewDiagonal = 1;\n    let isBlock;\n    const rival = user === Config.xPlayer ? Config.oPlayer : Config.xPlayer; // Check col\n\n    isBlock = true;\n    let winCells = [];\n    coorX -= 1;\n\n    while (coorX >= 0 && squares[coorX][coorY] === user) {\n      countCol += 1;\n      winCells.push([coorX, coorY]);\n      coorX -= 1;\n    }\n\n    if (coorX >= 0 && squares[coorX][coorY] !== rival) {\n      isBlock = false;\n    }\n\n    coorX = row;\n    winCells.push([coorX, coorY]);\n    coorX += 1;\n\n    while (coorX <= Config.brdSize - 1 && squares[coorX][coorY] === user) {\n      countCol += 1;\n      winCells.push([coorX, coorY]);\n      coorX += 1;\n    }\n\n    if (coorX <= Config.brdSize - 1 && squares[coorX][coorY] !== rival) {\n      isBlock = false;\n    }\n\n    coorX = row;\n    if (isBlock === false && countCol >= 5) return winCells; // Check row\n\n    isBlock = true;\n    winCells = [];\n    coorY -= 1;\n\n    while (coorY >= 0 && squares[coorX][coorY] === user) {\n      countRow += 1;\n      winCells.push([coorX, coorY]);\n      coorY -= 1;\n    }\n\n    if (coorY >= 0 && squares[coorX][coorY] !== rival) {\n      isBlock = false;\n    }\n\n    coorY = col;\n    winCells.push([coorX, coorY]);\n    coorY += 1;\n\n    while (coorY <= Config.brdSize - 1 && squares[coorX][coorY] === user) {\n      countRow += 1;\n      winCells.push([coorX, coorY]);\n      coorY += 1;\n    }\n\n    if (coorY <= Config.brdSize - 1 && squares[coorX][coorY] !== rival) {\n      isBlock = false;\n    }\n\n    coorY = col;\n    if (isBlock === false && countRow >= 5) return winCells; // Check main diagonal\n\n    isBlock = true;\n    winCells = [];\n    coorX -= 1;\n    coorY -= 1;\n\n    while (coorX >= 0 && coorY >= 0 && squares[coorX][coorY] === user) {\n      countMainDiagonal += 1;\n      winCells.push([coorX, coorY]);\n      coorX -= 1;\n      coorY -= 1;\n    }\n\n    if (coorX >= 0 && coorY >= 0 && squares[coorX][coorY] !== rival) {\n      isBlock = false;\n    }\n\n    coorX = row;\n    coorY = col;\n    winCells.push([coorX, coorY]);\n    coorX += 1;\n    coorY += 1;\n\n    while (coorX <= Config.brdSize - 1 && coorY <= Config.brdSize - 1 && squares[coorX][coorY] === user) {\n      countMainDiagonal += 1;\n      winCells.push([coorX, coorY]);\n      coorX += 1;\n      coorY += 1;\n    }\n\n    if (coorX <= Config.brdSize - 1 && coorY <= Config.brdSize - 1 && squares[coorX][coorY] !== rival) {\n      isBlock = false;\n    }\n\n    coorX = row;\n    coorY = col;\n    if (isBlock === false && countMainDiagonal >= 5) return winCells; // Check skew diagonal\n\n    isBlock = true;\n    winCells = [];\n    coorX -= 1;\n    coorY += 1;\n\n    while (coorX >= 0 && coorY >= 0 && squares[coorX][coorY] === user) {\n      countSkewDiagonal += 1;\n      winCells.push([coorX, coorY]);\n      coorX -= 1;\n      coorY += 1;\n    }\n\n    if (coorX >= 0 && coorY >= 0 && squares[coorX][coorY] !== rival) {\n      isBlock = false;\n    }\n\n    coorX = row;\n    coorY = col;\n    winCells.push([coorX, coorY]);\n    coorX += 1;\n    coorY -= 1;\n\n    while (coorX <= Config.brdSize - 1 && coorY <= Config.brdSize - 1 && squares[coorX][coorY] === user) {\n      countSkewDiagonal += 1;\n      winCells.push([coorX, coorY]);\n      coorX += 1;\n      coorY -= 1;\n    }\n\n    if (coorX <= Config.brdSize - 1 && coorY <= Config.brdSize - 1 && squares[coorX][coorY] !== rival) {\n      isBlock = false;\n    }\n\n    if (isBlock === false && countSkewDiagonal >= 5) return winCells;\n    return null;\n  }\n\n  changeSortMode() {\n    const accendingMode = this.state.accendingMode;\n    this.setState({\n      accendingMode: !accendingMode\n    });\n  }\n\n  handleClick(row, col) {\n    const stepNumber = this.state.stepNumber;\n    const history = this.state.history;\n    const newHistory = history.slice(0, stepNumber + 1);\n    const current = newHistory[newHistory.length - 1]; // Attention: Slice does not work properly with 2D array\n\n    const squares = JSON.parse(JSON.stringify(current.squares)); // It should be named 'curMove'\n\n    const nextMove = this.state.nextMove;\n    const winCells = this.state.winCells;\n    const curMove = nextMove;\n\n    if (winCells == null && squares[row][col] == null) {\n      // Assign value\n      squares[row][col] = curMove;\n      this.setState({\n        history: newHistory.concat([{\n          x: row,\n          y: col,\n          squares\n        }]),\n        stepNumber: newHistory.length,\n        nextMove: curMove === Config.xPlayer ? Config.oPlayer : Config.xPlayer,\n        winCells: this.checkWin(row, col, curMove, newHistory.length - 1)\n      });\n    }\n  }\n\n  jumpTo(step) {\n    const history = this.state.history;\n    const target = history[step];\n    const curMove = step % 2 === 0 ? Config.oPlayer : Config.xPlayer;\n    const nextMove = step % 2 !== 0 ? Config.oPlayer : Config.xPlayer;\n    this.setState({\n      stepNumber: step,\n      nextMove,\n      winCells: this.checkWin(target.x, target.y, curMove, step)\n    });\n  }\n\n  render() {\n    const history = this.state.history;\n    const stepNumber = this.state.stepNumber;\n    const current = history[stepNumber];\n    const nextMove = this.state.nextMove;\n    const winCells = this.state.winCells;\n    const accendingMode = this.state.accendingMode;\n    const moves = [];\n    history.map((step, move) => {\n      const content = move ? \"\\u0110\\u1EBFn b\\u01B0\\u1EDBc th\\u1EE9 #\".concat(Config.makeTwoDigits(move), \": (\").concat(Config.makeTwoDigits(history[move].x), \", \").concat(Config.makeTwoDigits(history[move].y), \")\") : \"Ch\\u01A1i l\\u1EA1i t\\u1EEB \\u0111\\u1EA7u !\";\n      const className = move === stepNumber ? \"board-button-bold\" : \"board-button\"; // Get current move\n\n      const currentMove = // eslint-disable-next-line react/no-array-index-key\n      React.createElement(\"li\", {\n        key: move,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        onClick: () => this.jumpTo(move),\n        className: className,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, content)); // Push head or tail depends on sort mode\n\n      if (accendingMode) {\n        moves.push(currentMove);\n      } else {\n        moves.splice(0, 0, currentMove);\n      }\n\n      return moves;\n    });\n    const sortMode = accendingMode ? \"N\\u01B0\\u1EDBc \\u0111i t\\u0103ng d\\u1EA7n\" : \"N\\u01B0\\u1EDBc \\u0111i gi\\u1EA3m d\\u1EA7n\";\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      className: \"App-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }), React.createElement(Status, {\n      nextMove: nextMove,\n      winCells: winCells,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"board-game\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"function-button\",\n      onClick: () => this.changeSortMode(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, sortMode)), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(Board, {\n      winCells: winCells,\n      squares: current.squares,\n      handleClick: (i, j) => this.handleClick(i, j),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(\"ol\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, moves)))));\n  }\n\n}\n\nexport default connect()(Game);","map":{"version":3,"sources":["/Users/nghiatq/web-btcn-1612422/src/containers/game.js"],"names":["React","Component","Board","Config","Status","Game","constructor","props","state","history","x","y","squares","Array","brdSize","fill","map","nextMove","xPlayer","stepNumber","winCells","accendingMode","checkWin","row","col","user","step","current","slice","coorX","coorY","countCol","countRow","countMainDiagonal","countSkewDiagonal","isBlock","rival","oPlayer","push","changeSortMode","setState","handleClick","newHistory","length","JSON","parse","stringify","curMove","concat","jumpTo","target","render","moves","move","content","makeTwoDigits","className","currentMove","splice","sortMode","logo","i","j","connect"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../css/Game.css';\nimport logo from '../logo.svg';\nimport Board from '../components/board';\nimport Config from '../constants/configs';\nimport Status from '../components/status';\n\nclass Game extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            history: [{\n                x: null,\n                y: null,\n                squares: Array(Config.brdSize).fill(null).map(() => { return Array(Config.brdSize).fill(null)})\n            }],\n            nextMove: Config.xPlayer,\n            stepNumber: 0,\n            winCells: null,\n            accendingMode: true\n        }\n    }\n\n    checkWin(row, col, user, step) {\n\n        if (step === 0) {\n            return null;\n        }\n\n        const {history} = this.state;\n        const current = history[step];\n        const squares = current.squares.slice();\n\n        // Get coordinates\n        let coorX = row;\n        let coorY = col;\n \n        let countCol = 1;\n        let countRow = 1;\n        let countMainDiagonal = 1;\n        let countSkewDiagonal = 1;\n        let isBlock;\n        const rival = (user === Config.xPlayer) ? Config.oPlayer : Config.xPlayer;\n \n        // Check col\n        isBlock = true;\n        let winCells = [];\n        coorX -= 1;\n        while(coorX >= 0 && squares[coorX][coorY] === user) {\n            countCol += 1;\n            winCells.push([coorX, coorY]);\n            coorX -= 1;\n        }\n        if (coorX >= 0 && squares[coorX][coorY] !== rival) {\n            isBlock = false;\n        }\n        coorX = row;\n        winCells.push([coorX, coorY]);\n        coorX += 1;\n        while(coorX <= Config.brdSize - 1 && squares[coorX][coorY] === user) {\n            countCol += 1;\n            winCells.push([coorX, coorY]);\n            coorX += 1;\n        }\n        if (coorX <= Config.brdSize - 1 && squares[coorX][coorY] !== rival) {\n            isBlock = false;\n        }\n        coorX = row;\n        if (isBlock === false && countCol >= 5) return winCells;\n \n        // Check row\n        isBlock = true;\n        winCells = [];\n        coorY -= 1;\n        while(coorY >= 0 && squares[coorX][coorY] === user) {\n            countRow += 1;\n            winCells.push([coorX, coorY]);\n            coorY -= 1;\n        }\n        if (coorY >= 0 && squares[coorX][coorY] !== rival) {\n            isBlock = false;\n        }\n        coorY = col;\n        winCells.push([coorX, coorY]);\n        coorY += 1;\n        while(coorY <= Config.brdSize - 1 && squares[coorX][coorY] === user) {\n            countRow += 1;\n            winCells.push([coorX, coorY]);\n            coorY += 1;\n        }\n        if (coorY <= Config.brdSize - 1 && squares[coorX][coorY] !== rival) {\n            isBlock = false;\n        }\n        coorY = col;\n        if (isBlock === false && countRow >= 5) return winCells;\n\n        // Check main diagonal\n        isBlock = true;\n        winCells = [];\n        coorX -= 1;\n        coorY -= 1;\n        while(coorX >= 0 && coorY >= 0 && squares[coorX][coorY] === user) {\n            countMainDiagonal += 1;\n            winCells.push([coorX, coorY]);\n            coorX -= 1;\n            coorY -= 1;\n        }\n        if (coorX >= 0 && coorY >= 0 && squares[coorX][coorY] !== rival) {\n            isBlock = false;\n        }\n        coorX = row;\n        coorY = col;\n        winCells.push([coorX, coorY]);\n        coorX += 1;\n        coorY += 1;\n        while(coorX <= Config.brdSize - 1 && coorY <= Config.brdSize - 1 && squares[coorX][coorY] === user) {\n            countMainDiagonal += 1;\n            winCells.push([coorX, coorY]);\n            coorX += 1;\n            coorY += 1;\n        }\n        if (coorX <= Config.brdSize - 1 && coorY <= Config.brdSize - 1 && squares[coorX][coorY] !== rival) {\n            isBlock = false;\n        }\n        coorX = row;\n        coorY = col;\n        if (isBlock === false && countMainDiagonal >= 5) return winCells;\n\n        // Check skew diagonal\n        isBlock = true;\n        winCells = [];\n        coorX -= 1;\n        coorY += 1;\n        while(coorX >= 0 && coorY >= 0 && squares[coorX][coorY] === user) {\n            countSkewDiagonal += 1;\n            winCells.push([coorX, coorY]);\n            coorX -= 1;\n            coorY += 1;\n        }\n        if (coorX >= 0 && coorY >= 0 && squares[coorX][coorY] !== rival) {\n            isBlock = false;\n        }\n        coorX = row;\n        coorY = col;\n        winCells.push([coorX, coorY]);\n        coorX += 1;\n        coorY -= 1;\n        while(coorX <= Config.brdSize - 1 && coorY <= Config.brdSize - 1 && squares[coorX][coorY] === user) {\n            countSkewDiagonal += 1;\n            winCells.push([coorX, coorY]);\n            coorX += 1;\n            coorY -= 1;\n        }\n        if (coorX <= Config.brdSize - 1 && coorY <= Config.brdSize - 1 && squares[coorX][coorY] !== rival) {\n            isBlock = false;\n        }\n        if (isBlock === false && countSkewDiagonal >= 5) return winCells;\n\n        return null;\n    }\n\n    changeSortMode() {\n        const { accendingMode } = this.state;\n        this.setState({\n            accendingMode: !accendingMode\n        })\n    }\n\n    handleClick(row, col) {      \n        const { stepNumber } = this.state;\n        const { history } = this.state;\n        const newHistory = history.slice(0, stepNumber + 1);\n        const current = newHistory[newHistory.length - 1];\n\n        // Attention: Slice does not work properly with 2D array\n        const squares = JSON.parse(JSON.stringify(current.squares));\n\n        // It should be named 'curMove'\n        const { nextMove } = this.state;\n        const { winCells } = this.state;\n        const curMove = nextMove;\n\n        if (winCells == null && squares[row][col] == null) {\n\n            // Assign value\n            squares[row][col] = curMove;\n\n            this.setState({\n                history: newHistory.concat([{\n                    x: row,\n                    y: col,\n                    squares\n                }]),\n                stepNumber: newHistory.length,\n                nextMove: (curMove === Config.xPlayer) ? Config.oPlayer : Config.xPlayer,\n                winCells: this.checkWin(row, col, curMove, newHistory.length - 1)\n            });\n        }\n    }\n\n    jumpTo(step)\n    {\n        const {history} = this.state;\n        const target = history[step];\n        const curMove = step % 2 === 0 ? Config.oPlayer : Config.xPlayer;\n        const nextMove = step % 2 !== 0 ? Config.oPlayer : Config.xPlayer;\n\n        this.setState({\n            stepNumber: step,\n            nextMove,\n            winCells: this.checkWin(target.x, target.y, curMove, step)\n        })\n    }\n\n    render() {\n        const { history } = this.state;\n        const { stepNumber } = this.state;\n        const current = history[stepNumber];\n        const { nextMove } = this.state;\n        const { winCells } = this.state;\n        const { accendingMode } = this.state;\n\n        const moves = [];\n        history.map((step, move) => {\n            const content = move ? `Đến bước thứ #${\n             Config.makeTwoDigits(move)  }: (${  Config.makeTwoDigits(history[move].x)  }, ${  Config.makeTwoDigits(history[move].y)  })`\n            : `Chơi lại từ đầu !`;\n            const className = (move === stepNumber) ? `board-button-bold` : `board-button`;\n            \n            // Get current move\n            const currentMove = (\n                // eslint-disable-next-line react/no-array-index-key\n                <li key={move}>\n                    <button type='button' onClick={() => this.jumpTo(move)}\n                            className={className}>{content}</button>\n                </li>\n            )\n\n            // Push head or tail depends on sort mode\n            if (accendingMode) {\n                moves.push(currentMove);\n            }\n            else {\n                moves.splice(0, 0, currentMove);\n            }\n\n            return moves;\n        })\n\n        const sortMode = accendingMode ? `Nước đi tăng dần` : `Nước đi giảm dần`;\n\n        return (\n            <div className='App'>\n\t\t\t\t<header className='App-header'>\n                    <img src={logo} className='App-logo' alt='logo' />\n\t\t\t\t\t<Status nextMove={nextMove} winCells={winCells} />\n                    <div className='board-game'>\n                        <button type='button' className='function-button' onClick={() => this.changeSortMode()}><b>{sortMode}</b></button>\n                        <div>\n                            <Board  winCells={winCells}\n                                    squares={current.squares}\n                                    handleClick={(i, j) => this.handleClick(i, j)}/>\n                        </div>\n                        <div>\n                            <ol>{moves}</ol>\n                        </div>\n                    </div>\n\t\t\t\t</header>\n            </div>\n        );\n    }\n}\n\nexport default connect()(Game);"]},"metadata":{},"sourceType":"module"}